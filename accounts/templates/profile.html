{% extends "base.html" %} {% block page_content %}
<!-- prettier-ignore -->
{% load static %}

<main id="main">
  <div class="container">
    <div class="intro-info">
      {% if user.is_authenticated %}
      <h2>Welcome {{ user.get_short_name }}</h2>
      <form action="/accounts/logout">
        <button type="submit">Log Out</button>
      </form>
      {% else %}
      <form id="login-page" action="{% url 'profile' %}">
        <button type="submit" form="login-page" title="Login">
          Login to see your queries
        </button>
      </form>
      {% endif %}
    </div>
  </div>
  <div class="container">
    {% if user.is_authenticated %}
    <h3>Your Chats</h3>
    <div class="container">
      <div class="card-columns">
        {% for query in queries %}
        <div class="card bg-light mb-3" style="max-width: 18rem;">
          <div class="card-header">
            By
            <var>{{ query.user }}</var>
            on {{ query.created_at }}
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ query.subject }}</h5>
            <p class="card-text">
              <strong>Resolved: {{ query.resolved }}</strong>
              <br />
              <a href="{% url 'query' query.pk %}">Continue Chat</a>
            </p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</main>

{% endblock %}
